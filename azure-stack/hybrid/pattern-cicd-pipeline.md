---
title: 使用 Azure 和 Azure Stack 集线器的智能边缘的 DevOps 模式。
description: 了解使用 Azure 和 Azure Stack 集线器的智能边缘的 DevOps 模式。
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: bf1ae2d8c404f8cc52ab32b22c883ee15934c3b1
ms.sourcegitcommit: fd5d217d3a8adeec2f04b74d4728e709a4a95790
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/29/2020
ms.locfileid: "76877470"
---
# <a name="devops-pattern"></a>DevOps 模式

来自单一位置的代码，并部署到可能位于本地数据中心、私有云和公有云中的开发、测试和生产环境中的多个目标。

## <a name="context-and-problem"></a>上下文和问题

应用程序部署持续性、安全性和可靠性对于组织和对开发团队至关重要。

应用通常需要在每个目标环境中运行重构的代码。 这意味着应用程序不是完全可移植的。 它必须在每个环境中进行更新、测试和验证。 例如，必须重写在开发环境中编写的代码，使其在测试环境中工作，并在最终落在生产环境中时进行重写。 此外，此代码专门与宿主相关联。 这会增加应用的维护成本和复杂性。 每个版本的应用都与每个环境相关联。 增加的复杂性和重复项会增加安全性和代码质量的风险。 此外，当你删除 "还原失败的主机" 或 "部署其他主机" 以处理需求增加时，无法轻松地重新部署代码。

## <a name="solution"></a>解决方案

使用 DevOps 模式可以生成、测试和部署在多个云上运行的应用。 此模式结合了持续集成和持续交付的做法。 通过持续集成，每次团队成员向版本控制提交更改时，都会生成并测试代码。 持续交付使每个步骤都从生成自动执行到生产环境中。 这些流程共同创建了一个支持跨不同环境进行部署的发布过程。 使用此模式，可以草拟代码，然后将相同的代码部署到本地环境、不同的私有云和公有云。 环境中的差异要求对配置文件进行更改，而不是对代码进行更改。

![DevOps 模式](media/pattern-cicd-pipeline/hybrid-ci-cd.png)

通过在本地、私有云和公有云环境中使用一组一致的开发工具，你可以实现持续集成和持续交付的做法。 使用 DevOps 模式部署的应用和服务是可互换的，并且可以在任何这些位置运行，从而利用本地和公有云的特性和功能。

使用 DevOps release 管道可帮助你：

- 基于向单个存储库提交的代码提交启动新的生成。
- 自动将新生成的代码部署到公有云，以便进行用户验收测试。
- 代码通过测试后，自动部署到私有云。

## <a name="issues-and-considerations"></a>问题和注意事项

DevOps 模式旨在确保部署之间的一致性，而不考虑目标环境。 但是，各种云环境和本地环境的功能各不相同。 请注意以下几点：

- 你的部署中的函数、终结点、服务和其他资源是否在目标部署位置中可用？
- 配置项目是否存储在可跨云访问的位置？
- 部署参数是否适用于所有目标环境？
- 所有目标云中是否均提供特定于资源的属性？

有关详细信息，请参阅[为云一致性开发 Azure 资源管理器模板](https://docs.microsoft.com/azure/azure-resource-manager/templates-cloud-consistency)。

此外，确定如何实现此模式时，请注意以下几点：

### <a name="scalability"></a>可伸缩性

部署自动化系统是 DevOps 模式的关键控制点。 实现可能会有所不同。 选择正确的服务器大小取决于所需工作负荷的大小。 Vm 的成本比容器更多。 但是，若要使用容器进行缩放，则必须配合容器运行生成过程。

### <a name="availability"></a>可用性

DevPattern 环境中的可用性意味着能够恢复与工作流关联的任何状态信息，如测试结果、代码依赖项或其他项目。 若要评估可用性要求，请考虑两个常见指标：

-   恢复时间目标（RTO）指定在不使用系统的情况下可以执行的时间。

-   恢复点目标（RPO）表示如果服务中断影响到系统，您可以承受的数据丢失量。

在实践中，RTO 和 RPO 意味着冗余和备份。 在全球 Azure 云上，可用性并不是硬件恢复的问题，而是 Azure 的一部分，而是确保保持 DevOps 系统的状态。 在 Azure Stack 集线器上，可能需要考虑硬件恢复。

设计用于部署自动化的系统时的另一个主要考虑因素是访问控制和正确管理将服务部署到云环境所需的权限。 创建、删除或修改部署需要哪些权限？ 例如，通常需要使用一组权限在 Azure 中创建资源组，并使用另一组权限在资源组中部署服务。

### <a name="manageability"></a>可管理性

基于 DevOps 模式的任何系统的设计必须考虑每个服务的自动化、日志记录和警报。 同时使用共享服务和/或应用程序团队，同时跟踪安全策略和管理。

在 Azure 或 Azure Stack 集线器上的单独资源组中部署生产环境和开发/测试环境。 然后，可以监视每个环境的资源，并按资源组汇总计费成本。 还可以删除作为集的资源，这适用于测试部署。

## <a name="when-to-use-this-pattern"></a>何时使用此模式

如果是以下情况，请使用此模式：

- 你可以在一个满足开发人员需求的环境中开发代码，并将其部署到特定于你的解决方案的环境，在此环境中，可能很难开发新代码。
- 您可以使用开发人员所需的代码和工具，前提是他们能够遵循 DevOps 模式下的持续集成和持续交付过程。

不推荐使用此模式：

- 如果无法自动执行基础结构，请预配资源、配置、标识和安全任务。
- 如果团队没有访问混合云资源的权限，则可实现持续集成/持续开发（CI/CD）方法。

## <a name="next-steps"></a>后续步骤

若要详细了解本文中介绍的主题：
- 请参阅[Azure DevOps 文档](/azure/devops)，了解有关 Azure DevOps 和相关工具的详细信息，包括 Azure Repos 和 Azure Pipelines。
- 请参阅[Azure Stack 系列产品和解决方案](/azure-stack)，详细了解产品和解决方案的整个产品组合。

准备好测试解决方案示例时，请继续阅读[DevOps 混合 CI/CD 解决方案部署指南](https://aka.ms/hybriddevopsdeploy)。 部署指南提供了有关部署和测试其组件的分步说明。 了解如何使用混合持续集成/持续交付（CI/CD）管道将应用程序部署到 Azure 并 Azure Stack 中心。
